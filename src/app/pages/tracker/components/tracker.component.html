<div class="row">
    <div class='col-md-12'>
        <ba-card cardTitle="Tracker" baCardClass="medium-card" class="smart-table-container">
            <div class="row">
                <div class="col-sm-3">
                    <label>Select Date</label>
                    <div class="input-group">
                        <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="tripFilterOption.tripDate" [maxDate]="todaysDate"
                        (ngModelChange)="dateChangeHandler()" ngbDatepicker #d="ngbDatepicker" disabled>
                        <button class="input-group-addon" (click)="d.toggle()" type="button">
                            <i class="ion-calendar"></i>
                        </button>
                    </div>
                </div>
                <div class="col-sm-3" [hidden]="isDistributor">
                    <label>Select Branch</label>
                    <select class="form-control" [(ngModel)]='tripFilterOption.branchId' (change)="branchChangeHandler()">
                        <option *ngFor="let obj of allBranches" [value]="obj.BranchID">
                            {{obj.BranchCode}} - {{obj.BranchName}}
                        </option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <label>Select Driver</label>
                    <select class="form-control">
                        <option *ngFor="let route of trips">
                            {{route.DriverName}}
                        </option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <label>Select Trip</label>
                    <select class="form-control" [(ngModel)]='tripFilterOption.TripID' (change)="tripChangeHandler()">
                        <option *ngFor="let trip of trips">
                            {{trip.TripCode}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="row marginTop">
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="block" style="background:brown;"></div>
                            <span class="blockContent">Planned Service</span>
                        </div>
                        <div class="col-md-3">
                            <div class="block" style="background:blue;"></div>
                            <span class="blockContent">Unplanned Service</span>
                        </div>
                        <div class="col-md-3">
                            <div class="block" style="background:red;"></div>
                            <span class="blockContent">Skipped Stops</span>
                        </div>
                        <div class="col-md-3">
                            <div class="block" style="background:yellow;"></div>
                            <span class="blockContent">Did Not Service</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-8 center" [hidden]="isDistributor">
                    <label class="radioItem radio-inline custom-radio nowrap radioButtonMargin">
                        <input type="radio" name="type" checked (click)="sequenceChangeHandler(1)">
                        <span>Planned Seq</span>
                    </label>
                    <label class="radioItem radio-inline custom-radio nowrap radioButtonMargin">
                        <input type="radio" name="type" (click)="sequenceChangeHandler(2)">
                        <span>Actual Delivery Seq</span>
                    </label>
                    <label class="radioItem radio-inline custom-radio nowrap radioButtonMargin">
                        <input type="radio" name="type" (click)="sequenceChangeHandler(3)">
                        <span>Planned & Actual Seq</span>
                    </label>
                </div>
            </div>
            <div class="row marginTop">
                <div class="col-md-4">
                    <div class="table-container" style="height:350px; overflow-y:scroll;">
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th style="width:75px;" [hidden]="isDistributor">
                                        <span>
                                            Planned
                                        </span>
                                    </th>
                                    <th style="width:75px;text-align: center;">
                                        <span>
                                            Actual
                                        </span>
                                    </th>
                                    <!-- <th class="thVerticalAlign table-text-align">
                                        <span class="cursorPointer">
                                            Date-Time
                                        </span>
                                    </th> -->
                                    <th>
                                        <span>
                                            Customer#
                                        </span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- <tr *ngFor="let item of allTickets | ticketFilter:searchObj.userType:searchObj.userType === 'Internal'?searchObj.UserId:searchObj.DistributorID | sort:customer.sortField:customer.isAsc"> -->
                                <!-- <tr *ngFor="let item of trips">
                                    <td>{{item.TripTicketList[0].PlannedSequence}}</td>
                                    <td class="table-id" style="cursor: pointer" *ngIf="!isNewTicket">
                                        {{item.TripTicketList[0].ActualSequence}}
                                    </td>
                                    <td>{{item.TripStartDate | date}}</td>
                                    <td>{{item.TripTicketList[0].CustomerName}}</td>
                                </tr> -->

                                <!-- hack for nested ng-For -->
                                <!-- <ng-template ngFor let-item [ngForOf]="trips" let-itemIndex="index">
                                    <ng-template ngFor let-subitem [ngForOf]="item.TripTicketList" let-subitemIndex="index">
                                        <tr>
                                            <td>{{subitem.PlannedSequence}}</td>
                                            <td class="table-id" style="cursor: pointer" *ngIf="!isNewTicket">
                                                {{subitem.ActualSequence}}
                                            </td>
                                            <td>{{item.TripStartDate | date}}</td>
                                            <td>{{subitem.CustomerName}}</td>
                                        </tr>
                                    </ng-template>
                                </ng-template>     -->
                                <ng-template ngFor let-subitem [ngForOf]="selectedTrip" let-subitemIndex="index">
                                    <tr>
                                        <td [hidden]="isDistributor">{{subitem.PlannedSequence}}</td>
                                        <td style="text-align:center;" *ngIf="!isNewTicket">
                                            {{subitem.ActualSequence}}
                                        </td>
                                        <!-- <td>{{tripStartDate | date}}</td> -->
                                        <td class="custom-tooltip-ion">
                                            {{subitem.CustomerID}}
                                            <span class="tooltiptext">{{subitem.CustomerName}}</span>
                                        </td>
                                    </tr>
                                </ng-template>
                            </tbody>
                        </table>
                        <!-- <div style='text-align:center'> <a> <img [hidden]='!showSpinner' src="assets/reddyIce/spinner.gif " width='25px'></a> </div>
                        <div *ngIf="!allTracks.length && !showSpinner" style='text-align:center'> No data found </div> -->
                    </div>
                </div>
                <!-- <div class="col-md-8" style="overflow-y: hidden;height: 255px;">
                    <img src="../../../assets/img/Tracker-Map.PNG">
                </div> -->
                <div class="col-md-8" style="overflow-y: hidden;height: 350px;">
                    <ba-card cardTitle="Route Map">
                        <div class="google-maps"></div>
                    </ba-card>
                </div>
            </div>
        </ba-card>
    </div>
</div>