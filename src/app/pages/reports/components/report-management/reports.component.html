<ba-card cardTitle="Reports{{userSubTitle}}" >
    <div class="row">
        <div class="col-sm-4">
            <label>Start Date</label>
            <div class="input-group">
                <input class="form-control" name="dp" ngbDatepicker #d="ngbDatepicker" [(ngModel)]="filter.startDate"
                    disabled>
                <button class="input-group-addon" (click)="d.toggle()" type="button">
                            <i class="ion-calendar"></i>
                        </button>
            </div>
        </div>
        <div class="col-sm-4">
            <label>End Date</label>
            <div class="input-group">
                <input class="form-control" name="dp" ngbDatepicker #d1="ngbDatepicker" [(ngModel)]="filter.endDate"
                    disabled>
                <button class="input-group-addon" (click)="d1.toggle()" type="button">
                                <i class="ion-calendar"></i>
                            </button>
            </div>
        </div>
        <div class="col-sm-4">
            <label>Select Report</label>
            <select class="form-control" [(ngModel)]="filter.reportType">
                    <!-- <option value="ED">End of Day Report</option>
                    <option value="DS">Delivery Status</option> -->
                    <option value="DR">Deposit Report</option>
                    <option value="RS">Route Settlement</option>
                    <option value="SR">Sales Register</option>
                    <!-- <option value="AS">Assets Scanning</option>
                    <option value="DRA">Drayage Report</option> -->
                </select>
        </div>
        <div class="col-md-2 text-right head-button-container">
            <button class="btn btn-danger button-top-margin" (click)="updateLink()">View Report</button>
        </div>
    </div>
    <div class="row top-margin">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-3 div-border left-margin-of-shortdiv">
                    <span class="col-sm-4 local-padding-eater">
                            <label class="top-margin">Ticket Type</label>
                        </span>
                    <span class="col-sm-4 local-padding-eater left-margin">
                            <input type="radio" name="ticketType" value="regular" [(ngModel)]="filter.ticketType" (ngModelChange)="ticketTypeChangeHandler()" class="top-margin" checked>
                            <label class="top-margin"><b>Regular</b></label>
                        </span>
                    <span class="col-sm-4 local-padding-eater left-margin">
                            <input type="radio" name="ticketType" value="paper" [(ngModel)]="filter.ticketType" (ngModelChange)="ticketTypeChangeHandler()" class="top-margin">
                            <label class="top-margin"><b>Paper</b></label>
                        </span>
                </div>
                <div class="col-sm-8 div-border left-margin-of-longdiv">
                    <div class="row" style="padding-top:2px;">
                        <div class="col-sm-3">
                            <div class="row">
                                <div class="col-sm-4">
                                    <input type="radio" name="userType" value="internal" [(ngModel)]="filter.userType" (ngModelChange)="userTypeChangeHandler()">
                                    <label class="top-margin"><b>RI</b></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="radio" name="userType" value="external" [(ngModel)]="filter.userType" (ngModelChange)="userTypeChangeHandler()">
                                    <label class="top-margin"><b>Distributor</b></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <div class="row">
                                <ng-container *ngIf="filter.userType === 'internal'">
                                    <div class="col-sm-2">
                                        <label class="top-margin pull-right"><b>Branch</b></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select class="form-control" [(ngModel)]='filter.branch' (ngModelChange)="branchChangeHandler()">
                                            <option *ngFor="let branch of branches" [value]="branch.BranchID">{{branch.BranchID}} {{branch.BranchName}}</option>
                                        </select>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="filter.userType === 'external'">
                                    <div class="col-sm-2">
                                        <label class="top-margin pull-right"><b>Distributor</b></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select class="form-control" [(ngModel)]='filter.distributor' (ngModelChange)="distributorChangeHandler()">
                                                <option *ngFor="let distributor of distributors" [value]="distributor.DistributorCopackerID">{{distributor?.Name}}</option>
                                            </select>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="filter.userType === 'internal'">
                                    <div class="col-sm-2">
                                        <label class="top-margin pull-right"><b>Driver</b></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select class="form-control pull-right" [(ngModel)]="filter.driver">
                                                <option *ngFor="let driver of drivers" [value]="driver.UserId">{{driver.UserName}}</option>
                                            </select>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="filter.userType === 'external'">
                                    <div class="col-sm-2">
                                        <label class="top-margin pull-right"><b>Driver</b></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select class="form-control pull-right" [(ngModel)]="filter.driver">
                                                <option *ngFor="let driver of driversofDist" [value]="driver.UserId">{{driver.FirstName}} {{driver.LastName}}</option>
                                            </select>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <iframe *ngIf="viewReport" width="100%" height="400px" style="border:1px solid rgba(0, 0, 0, 0.1)" [src]='linkRpt'></iframe>
</ba-card>