<ba-card cardTitle="Ticket List" baCardClass="medium-card" class="smart-table-container" #customer>
    <div class="row">
        <div class="col-sm-4 col-sm-offset-2">
            <div class="input-group">
                <input class="form-control" [(ngModel)]="searchObj.CreatedDate" placeholder="yyyy-mm-dd" 
                name="dp" (ngModelChange)='getSearchedTickets();' ngbDatepicker #d="ngbDatepicker">
                <button class="input-group-addon" (click)="d.toggle()" type="button">
                    <i class="ion-calendar"></i>
                    </button>
            </div>
        </div>
        <div class="col-sm-4">
            <select class="form-control" id="exampleSelect1" [(ngModel)]="searchObj.BranchId" (ngModelChange)="getSearchedTickets()">
                <option *ngFor="let obj of allBranches" [value]="obj.BranchID">
                    {{obj.BranchID}}-{{obj.BranchName}}
                </option>
            </select>
        </div>
        <div class="col-sm-2">
            <button class="btn btn-primary addCustBtn pull-right" (click)="approveCheckedTickets()">
                Approve
            </button>
        </div>
        <div class="col-sm-2">
            <button [routerLink]="['../ticket']" class="btn btn-primary addCustBtn pull-right">
                Create Ticket
            </button>
        </div>
    </div>

    <!-- filter not needed for now, hence removing -->
    <!-- <div class="row" style="padding-bottom: 10px">
        <div class="col-sm-3">
            <label class="radioItem radio-inline custom-radio nowrap">
                <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" 
                (click)="getSelectedTicketType(false)" checked>
                <span>My Tickets</span>
            </label>
        </div>
        <div class="col-sm-3">
            <label class="radioItem radio-inline custom-radio nowrap">
                <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"
                (click)="getSelectedTicketType(true)">
                <span>All Tickets</span>
            </label>
        </div>
    </div> -->
    <div class="vertical-scroll overflow">
        <table class="table table-striped table-condensed">
            <thead>
                <tr>
                    <th>Select</th>
                    <th class="table-id">Actions</th>
                    <th>
                        <span style="cursor:pointer;" (click)="customer.sortField = 'TicketID';customer.isAsc=!customer.isAsc;">
                          Ticket #
                           <i *ngIf="(customer.sortField == 'TicketID')" [ngClass]="(customer.isAsc && customer.sortField == 'TicketID' ? 'fa fa-chevron-up' : 'fa fa-chevron-down')"></i> 
                      </span>
                    </th>
                    <th>
                        <span style="cursor:pointer;" (click)="customer.sortField = 'CustomerID';customer.isAsc=!customer.isAsc;">
                          Customer #
                          <i *ngIf="(customer.sortField == 'CustomerID')" [ngClass]="(customer.isAsc && customer.sortField == 'CustomerID' ? 'fa fa-chevron-up' : 'fa fa-chevron-down')"></i> 
                      </span>
                    </th>
                    <th>
                        <span style="cursor:pointer;" (click)="customer.sortField = 'CashAmount';customer.isAsc=!customer.isAsc;">
                          Amount
                          <i *ngIf="(customer.sortField == 'CashAmount')" [ngClass]="(customer.isAsc && customer.sortField == 'CashAmount' ? 'fa fa-chevron-up' : 'fa fa-chevron-down')"></i> 
                      </span>
                    </th>
                    <th (click)="customer.sortField = 'CardPaymentStatus';customer.isAsc=!customer.isAsc;">
                        <span style="cursor:pointer;">
                          Status
                          <i *ngIf="(customer.sortField == 'CardPaymentStatus')" [ngClass]="(customer.isAsc && customer.sortField == 'CardPaymentStatus' ? 'fa fa-chevron-up' : 'fa fa-chevron-down')"></i> 
                      </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of allTickets | sort:customer.sortField:customer.isAsc">
                    <td>
                        <input type="checkbox" name="manualTicketMultiSelect" [(ngModel)]="item.selected">
                    </td>
                    <td class="table-id" style="cursor: pointer" *ngIf="!isNewTicket">
                        <a [routerLink]="['../view/'+item.TicketID]">
                            <i class="ion-eye custom-tooltip-ion" style="margin-right: 5px">
                                <span class="tooltiptext">View</span>
                            </i>
                        </a>
                        <a [routerLink]="['../ticket/'+item.TicketID]" [hidden]="item.TicketStatusID!=23">
                            <i class="ion-edit custom-tooltip-ion" style="margin-right: 5px">
                                <span class="tooltiptext">Edit</span>
                            </i>
                        </a>
                        <!-- <i class="ion-trash-a custom-tooltip-ion">
                          <span class="tooltiptext">Delete</span>
                        </i> -->
                    </td>
                    <td>{{ item.TicketNumber }}</td>
                    <td>{{ item.Customer.CustomerID }}</td>
                    <td>{{ item.CashAmount }}</td>
                    <td>{{ item.TicketStatusID|ticketStatus}}</td>
                </tr>
            </tbody>
        </table>
        <div style='text-align:center'> <a> <img [hidden]='!showSpinner' src="assets/reddyIce/spinner.gif " width='25px'></a> </div>
        <div *ngIf="!allTickets.length && !showSpinner" style='text-align:center'> No data found </div>
    </div>
</ba-card>